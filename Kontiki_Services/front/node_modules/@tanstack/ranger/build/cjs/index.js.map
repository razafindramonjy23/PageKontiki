{"version":3,"file":"index.js","sources":["../../src/index.ts"],"sourcesContent":["import { linearInterpolator, getBoundingClientRect, sortNumList } from './utils'\n\nexport type RangerChangeEvent<TTrackElement> = (\n  instance: Ranger<TTrackElement>,\n) => void\n\nexport type RangerInterpolator = {\n  getPercentageForValue: (val: number, min: number, max: number) => number\n  getValueForClientX: (\n    clientX: number,\n    trackDims: { width: number; left: number },\n    min: number,\n    max: number,\n  ) => number\n}\n\nexport type RangerClassConfig<TTrackElement = unknown> = {\n  getRangerElement: () => TTrackElement | null\n  values: ReadonlyArray<number>\n\n  min: number\n  max: number\n\n  tickSize: number\n  ticks?: ReadonlyArray<number>\n\n  interpolator: RangerInterpolator\n  onChange: RangerChangeEvent<TTrackElement>\n  onDrag?: RangerChangeEvent<TTrackElement>\n\n  rerender: () => void\n  debug: boolean\n} & ({ stepSize: number } | { steps: ReadonlyArray<number> })\n\nexport type RangerConfig<TTrackElement = unknown> = Omit<\n  RangerClassConfig<TTrackElement>,\n  'tickSize' | 'interpolator' | 'onChange' | 'debug'\n> & {\n  tickSize?: number\n  interpolator?: RangerInterpolator\n  onChange?: RangerChangeEvent<TTrackElement>\n  debug?: boolean\n} & ({ stepSize: number } | { steps: ReadonlyArray<number> })\n\nexport type RangerOptions<TTrackElement = unknown> = Omit<\n  RangerConfig<TTrackElement>,\n  'rerender'\n> &\n  ({ stepSize: number } | { steps: ReadonlyArray<number> })\n\nexport class Ranger<TTrackElement = unknown> {\n  activeHandleIndex: number | undefined\n  tempValues: ReadonlyArray<number> | undefined\n  sortedValues: ReadonlyArray<number> = []\n\n  options!: RangerClassConfig<TTrackElement>\n\n  private rangerElement: TTrackElement | null = null\n\n  constructor(opts: RangerConfig<TTrackElement>) {\n    this.setOptions(opts)\n  }\n\n  setOptions(opts: RangerConfig<TTrackElement>) {\n    Object.entries(opts).forEach(([key, value]) => {\n      if (typeof value === 'undefined') delete (opts as any)[key]\n    })\n\n    this.options = {\n      debug: false,\n      tickSize: 10,\n      interpolator: linearInterpolator,\n      onChange: () => {},\n      ...opts,\n    }\n  }\n\n  _willUpdate = () => {\n    const rangerElement = this.options.getRangerElement()\n\n    if (this.rangerElement !== rangerElement) {\n      this.rangerElement = rangerElement\n    }\n  }\n\n  getValueForClientX = (clientX: number) => {\n    const trackDims = getBoundingClientRect(this.rangerElement)\n    return this.options.interpolator.getValueForClientX(\n      clientX,\n      trackDims,\n      this.options.min,\n      this.options.max,\n    )\n  }\n\n  getNextStep = (val: number, direction: number): number => {\n    const { min, max } = this.options\n\n    if ('steps' in this.options) {\n      const { steps } = this.options\n      let currIndex = steps.indexOf(val)\n      let nextIndex = currIndex + direction\n      if (nextIndex >= 0 && nextIndex < steps.length) {\n        return steps[nextIndex] as number\n      } else {\n        return val\n      }\n    } else {\n      let nextVal = val + this.options.stepSize * direction\n      if (nextVal >= min && nextVal <= max) {\n        return nextVal\n      } else {\n        return val\n      }\n    }\n  }\n\n  roundToStep = (val: number) => {\n    const { min, max } = this.options\n\n    let left = min\n    let right = max\n    if ('steps' in this.options) {\n      this.options.steps.forEach((step) => {\n        if (step <= val && step > left) {\n          left = step\n        }\n        if (step >= val && step < right) {\n          right = step\n        }\n      })\n    } else {\n      const { stepSize } = this.options\n      while (left < val && left + stepSize < val) {\n        left += stepSize\n      }\n\n      right = Math.min(left + stepSize, max)\n    }\n\n    if (val - left < right - val) {\n      return left\n    }\n    return right\n  }\n\n  handleDrag = (e: any) => {\n    if (this.activeHandleIndex === undefined) {\n      return\n    }\n\n    const clientX =\n      e.type === 'touchmove' ? e.changedTouches[0].clientX : e.clientX\n    const newValue = this.getValueForClientX(clientX)\n    const newRoundedValue = this.roundToStep(newValue)\n\n    this.sortedValues = [\n      ...this.options.values.slice(0, this.activeHandleIndex),\n      newRoundedValue,\n      ...this.options.values.slice(this.activeHandleIndex + 1),\n    ]\n\n    if (this.options.onDrag) {\n      this.options.onDrag(this)\n    } else {\n      this.tempValues = this.sortedValues\n      this.options.rerender()\n    }\n  }\n\n  handleKeyDown = (e: KeyboardEvent, i: number) => {\n    const { values } = this.options\n\n    // Left Arrow || Right Arrow\n    if (e.keyCode === 37 || e.keyCode === 39) {\n      this.activeHandleIndex = i\n      const direction = e.keyCode === 37 ? -1 : 1\n      const newValue = this.getNextStep(values[i] as number, direction)\n      const newValues = [\n        ...values.slice(0, i),\n        newValue,\n        ...values.slice(i + 1),\n      ]\n      this.sortedValues = sortNumList(newValues)\n      if (this.options.onChange) {\n        this.options.onChange(this)\n      }\n    }\n  }\n\n  handlePress = (_e: any, i: number) => {\n    this.activeHandleIndex = i\n    this.options.rerender()\n\n    const handleRelease = () => {\n      const { tempValues, handleDrag } = this\n\n      document.removeEventListener('mousemove', handleDrag)\n      document.removeEventListener('touchmove', handleDrag)\n      document.removeEventListener('mouseup', handleRelease)\n      document.removeEventListener('touchend', handleRelease)\n      this.sortedValues = sortNumList(tempValues || this.options.values)\n      if (this.options.onChange) {\n        this.options.onChange(this)\n      }\n      if (this.options.onDrag) {\n        this.options.onDrag(this)\n      }\n      this.activeHandleIndex = undefined\n      this.tempValues = undefined\n      this.options.rerender()\n    }\n    const { handleDrag } = this\n    document.addEventListener('mousemove', handleDrag)\n    document.addEventListener('touchmove', handleDrag)\n    document.addEventListener('mouseup', handleRelease)\n    document.addEventListener('touchend', handleRelease)\n  }\n\n  getPercentageForValue = (val: number) =>\n    this.options.interpolator.getPercentageForValue(\n      val,\n      this.options.min,\n      this.options.max,\n    )\n\n  getTicks = () => {\n    let ticks: Array<number> = []\n    if (this.options.ticks) {\n      ticks = [...this.options.ticks]\n    } else if ('steps' in this.options) {\n      ticks = [...this.options.steps]\n    } else {\n      ticks = [this.options.min]\n      while (\n        (ticks[ticks.length - 1] as number) <\n        this.options.max - this.options.tickSize\n      ) {\n        ticks.push((ticks[ticks.length - 1] as number) + this.options.tickSize)\n      }\n      ticks.push(this.options.max)\n    }\n\n    return ticks.map((value, i) => ({\n      value,\n      key: i,\n      percentage: this.getPercentageForValue(value),\n    }))\n  }\n\n  getSteps = () => {\n    const values = sortNumList(this.tempValues || this.options.values)\n\n    return [...values, this.options.max].map((value, i) => {\n      const previousValue = values[i - 1]\n      const leftValue =\n        previousValue !== undefined ? previousValue : this.options.min\n      const left = this.getPercentageForValue(leftValue)\n      const width = this.getPercentageForValue(value) - left\n      return {\n        left,\n        width,\n      }\n    })\n  }\n\n  handles = () => {\n    return (this.tempValues || this.options.values).map((value, i) => ({\n      value,\n      isActive: i === this.activeHandleIndex,\n      onKeyDownHandler: (e: any) => {\n        this.handleKeyDown(e, i)\n      },\n      onMouseDownHandler: (e: any) => {\n        this.handlePress(e, i)\n      },\n      onTouchStart: (e: any) => {\n        this.handlePress(e, i)\n      },\n    }))\n  }\n}\n"],"names":["Ranger","sortedValues","rangerElement","constructor","opts","setOptions","Object","entries","forEach","key","value","options","debug","tickSize","interpolator","linearInterpolator","onChange","_willUpdate","getRangerElement","getValueForClientX","clientX","trackDims","getBoundingClientRect","min","max","getNextStep","val","direction","steps","currIndex","indexOf","nextIndex","length","nextVal","stepSize","roundToStep","left","right","step","Math","handleDrag","e","activeHandleIndex","undefined","type","changedTouches","newValue","newRoundedValue","values","slice","onDrag","tempValues","rerender","handleKeyDown","i","keyCode","newValues","sortNumList","handlePress","_e","handleRelease","document","removeEventListener","addEventListener","getPercentageForValue","getTicks","ticks","push","map","percentage","getSteps","previousValue","leftValue","width","handles","isActive","onKeyDownHandler","onMouseDownHandler","onTouchStart"],"mappings":"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"}