/**
 * react-ranger
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ReactRanger={},e.React)}(this,(function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s=n(t);
/**
   * ranger
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */const o=e=>[...e].map(Number).sort(((e,t)=>e-t)),i={getPercentageForValue:(e,t,n)=>Math.max(0,Math.min(100,(e-t)/(n-t)*100)),getValueForClientX:(e,t,n,s)=>{const{left:o,width:i}=t;return(s-n)*((e-o)/i)+n}};class r{sortedValues=[];rangerElement=null;constructor(e){this.setOptions(e)}setOptions(e){Object.entries(e).forEach((([t,n])=>{void 0===n&&delete e[t]})),this.options={debug:!1,tickSize:10,interpolator:i,onChange:()=>{},...e}}_willUpdate=()=>{const e=this.options.getRangerElement();this.rangerElement!==e&&(this.rangerElement=e)};getValueForClientX=e=>{const t=(e=>{const t=e.getBoundingClientRect();return{left:Math.ceil(t.left),width:Math.ceil(t.width)}})(this.rangerElement);return this.options.interpolator.getValueForClientX(e,t,this.options.min,this.options.max)};getNextStep=(e,t)=>{const{min:n,max:s}=this.options;if("steps"in this.options){const{steps:n}=this.options;let s=n.indexOf(e)+t;return s>=0&&s<n.length?n[s]:e}{let o=e+this.options.stepSize*t;return o>=n&&o<=s?o:e}};roundToStep=e=>{const{min:t,max:n}=this.options;let s=t,o=n;if("steps"in this.options)this.options.steps.forEach((t=>{t<=e&&t>s&&(s=t),t>=e&&t<o&&(o=t)}));else{const{stepSize:t}=this.options;for(;s<e&&s+t<e;)s+=t;o=Math.min(s+t,n)}return e-s<o-e?s:o};handleDrag=e=>{if(void 0===this.activeHandleIndex)return;const t="touchmove"===e.type?e.changedTouches[0].clientX:e.clientX,n=this.getValueForClientX(t),s=this.roundToStep(n);this.sortedValues=[...this.options.values.slice(0,this.activeHandleIndex),s,...this.options.values.slice(this.activeHandleIndex+1)],this.options.onDrag?this.options.onDrag(this):(this.tempValues=this.sortedValues,this.options.rerender())};handleKeyDown=(e,t)=>{const{values:n}=this.options;if(37===e.keyCode||39===e.keyCode){this.activeHandleIndex=t;const s=37===e.keyCode?-1:1,i=this.getNextStep(n[t],s),r=[...n.slice(0,t),i,...n.slice(t+1)];this.sortedValues=o(r),this.options.onChange&&this.options.onChange(this)}};handlePress=(e,t)=>{this.activeHandleIndex=t,this.options.rerender();const n=()=>{const{tempValues:e,handleDrag:t}=this;document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",t),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",n),this.sortedValues=o(e||this.options.values),this.options.onChange&&this.options.onChange(this),this.options.onDrag&&this.options.onDrag(this),this.activeHandleIndex=void 0,this.tempValues=void 0,this.options.rerender()},{handleDrag:s}=this;document.addEventListener("mousemove",s),document.addEventListener("touchmove",s),document.addEventListener("mouseup",n),document.addEventListener("touchend",n)};getPercentageForValue=e=>this.options.interpolator.getPercentageForValue(e,this.options.min,this.options.max);getTicks=()=>{let e=[];if(this.options.ticks)e=[...this.options.ticks];else if("steps"in this.options)e=[...this.options.steps];else{for(e=[this.options.min];e[e.length-1]<this.options.max-this.options.tickSize;)e.push(e[e.length-1]+this.options.tickSize);e.push(this.options.max)}return e.map(((e,t)=>({value:e,key:t,percentage:this.getPercentageForValue(e)})))};getSteps=()=>{const e=o(this.tempValues||this.options.values);return[...e,this.options.max].map(((t,n)=>{const s=e[n-1],o=void 0!==s?s:this.options.min,i=this.getPercentageForValue(o);return{left:i,width:this.getPercentageForValue(t)-i}}))};handles=()=>(this.tempValues||this.options.values).map(((e,t)=>({value:e,isActive:t===this.activeHandleIndex,onKeyDownHandler:e=>{this.handleKeyDown(e,t)},onMouseDownHandler:e=>{this.handlePress(e,t)},onTouchStart:e=>{this.handlePress(e,t)}})))}const a="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;e.Ranger=r,e.useRanger=function(e){const t=s.useReducer((()=>({})),{})[1],n={...e,rerender:t,onChange:n=>{t(),e.onChange?.(n)}},[o]=s.useState((()=>new r(n)));return o.setOptions(n),a((()=>o._willUpdate())),o},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.production.js.map
